<!DOCTYPE html>
<html>
    <head>
        <title>CCV Web</title>
        <script>
            function clearFunction(){
                document.getElementById("CCN1").value="";
                document.getElementById("CCN2").value="";
                document.getElementById("CCN3").value="";
                document.getElementById("CCN4").value="";
                document.getElementById("CCN_stat").style.color="black"
                document.getElementById("CCN_stat").innerHTML="";
            }
            function checkDigit (currFocus){
                document.getElementById("CCN_stat").style.color="black"
                document.getElementById("CCN_stat").innerHTML="";
                var input=document.getElementById("CCN"+currFocus).value;
                var digit=input.length;
                // console.log("CCN"+currFocus+": "+digit);
                if(digit==4){
                    document.getElementById("CCN"+(currFocus+1)).focus();
                }
            }
            function myFunction () {
                input1=document.getElementById("CCN1").value;
                input2=document.getElementById("CCN2").value;
                input3=document.getElementById("CCN3").value;
                input4=document.getElementById("CCN4").value;
                var input=input1+input2+input3+input4;
                var card_num = input.split("");
                var digit=parseInt(Object.keys(card_num).length);
                var sum=0;
                for (let i=1;i<=digit;i++){
                    if (i%2==0){
                        card_num[digit-i]=card_num[digit-i]*2;
                        if(card_num[digit-i]>=10){
                            card_num[digit-i]=card_num[digit-i]%10;
                            card_num[digit-i]+=1;
                        }
                    }
                    sum+=parseInt(card_num[digit-i]);
                }
                if(sum%10==0&&digit>=15){
                    //console.log("Valid");
                    document.getElementById("CCN_stat").style.color="green"
                    document.getElementById("CCN_stat").innerHTML='&#10003; Valid!';
                }
                else{
                    //console.log("Invalid");
                    document.getElementById("CCN_stat").style.color="red"
                    document.getElementById("CCN_stat").innerHTML='&#10060; Invalid!';
                }
            }
        </script>
    </head>
    <body>
        <div>
            <label for="CCN">Credit Card Number:</label>
            <input id="CCN1" type="text" maxlength="4" size="4" oninput="checkDigit(1)">
            <input id="CCN2" type="text" maxlength="4" size="4" oninput="checkDigit(2)">
            <input id="CCN3" type="text" maxlength="4" size="4" oninput="checkDigit(3)">
            <input id="CCN4" type="text" maxlength="4" size="4">
            <a id="CCN_stat"></a>
        </div>
        <div>
            <input id="checkCCN" type="button" value="Check if Valid" onclick="myFunction()">
            <input id="clearBtn" type="button" value="Clear Fields" onclick="clearFunction()">
        </div>
    </body>
</html>